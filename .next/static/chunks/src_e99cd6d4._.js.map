{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/viengsone/Documents/slkwebsite-next/src/components/admin/JobApplications.tsx"],"sourcesContent":["\"use client\";\nimport React, { useEffect, useState } from \"react\";\nimport { supabase } from \"../../lib/supabase\";\nimport { FileText, Download, Eye, Mail, Phone, Calendar, User, Briefcase, AlertCircle, CheckCircle, Clock, Trash2, Search, Filter } from \"lucide-react\";\nimport { toast } from \"react-hot-toast\";\nimport AnimatedSection from \"../AnimatedSection\";\n\ninterface JobApplication {\n  id: string;\n  job_title: string;\n  name: string;\n  email: string;\n  phone?: string;\n  cover_letter?: string;\n  cv_url?: string;\n  submitted_at: string;\n  status?: 'pending' | 'reviewed' | 'shortlisted' | 'rejected';\n  experience_years?: number;\n  desired_salary?: string;\n  availability?: string;\n  linkedin_url?: string;\n  portfolio_url?: string;\n}\n\nconst JobApplications = () => {\n  const [applications, setApplications] = useState<JobApplication[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [isClient, setIsClient] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  const [selectedApplication, setSelectedApplication] = useState<JobApplication | null>(null);\n  const [showDetailModal, setShowDetailModal] = useState(false);\n\n  useEffect(() => {\n    setIsClient(true);\n  }, []);\n\n  useEffect(() => {\n    if (isClient) {\n      fetchApplications();\n    }\n  }, [isClient]);\n\n  const fetchApplications = async () => {\n    if (!isClient) return;\n    setLoading(true);\n    try {\n      const { data, error } = await supabase\n        .from(\"job_applications\")\n        .select(\"*\")\n        .order(\"applied_at\", { ascending: false });\n\n      if (error) {\n        console.error(\"Supabase fetch error:\", error.message, error.details);\n        toast.error(\"Failed to load applications\");\n        setApplications([]);\n      } else {\n        setApplications(data || []);\n        toast.success(`Loaded ${data?.length || 0} applications`);\n      }\n    } catch (error) {\n      console.error(\"Error fetching applications:\", error);\n      toast.error(\"Failed to load applications\");\n      setApplications([]);\n    }\n    setLoading(false);\n  };\n\n  const getCVLink = (cv_url: string) => {\n    if (!cv_url) return \"#\";\n    // If it's already a full URL, just return it\n    if (cv_url.startsWith(\"http\")) return cv_url;\n    // Remove any duplicate bucket prefix\n    const cleanedPath = cv_url.replace(/^cv-applications\\//, \"\");\n    return `https://qawxuytlwqmsomsqlrsc.supabase.co/storage/v1/object/public/cv-applications/${cleanedPath}`;\n  };\n\n  const updateApplicationStatus = async (applicationId: string, newStatus: string) => {\n    if (!isClient) return;\n    try {\n      const { error } = await supabase\n        .from(\"job_applications\")\n        .update({ status: newStatus })\n        .eq(\"id\", applicationId);\n\n      if (error) {\n        throw error;\n      }\n      setApplications(prev => \n        prev.map(app => \n          app.id === applicationId \n            ? { ...app, status: newStatus as JobApplication['status'] }\n            : app\n        )\n      );\n      toast.success(`Application status updated to ${newStatus}`);\n    } catch (error) {\n      console.error(\"Error updating status:\", error);\n      toast.error(\"Failed to update application status\");\n    }\n  };\n\n  const deleteApplication = async (applicationId: string) => {\n    if (!isClient) return;\n    if (!confirm(\"Are you sure you want to delete this application?\")) {\n      return;\n    }\n    try {\n      const { error } = await supabase\n        .from(\"job_applications\")\n        .delete()\n        .eq(\"id\", applicationId);\n\n      if (error) {\n        throw error;\n      }\n      setApplications(prev => prev.filter(app => app.id !== applicationId));\n      toast.success(\"Application deleted successfully\");\n    } catch (error) {\n      console.error(\"Error deleting application:\", error);\n      toast.error(\"Failed to delete application\");\n    }\n  };\n\n  const getStatusIcon = (status?: string) => {\n    switch (status) {\n      case 'pending':\n        return <Clock className=\"w-4 h-4 text-yellow-500\" />;\n      case 'reviewed':\n        return <Eye className=\"w-4 h-4 text-blue-500\" />;\n      case 'shortlisted':\n        return <CheckCircle className=\"w-4 h-4 text-green-500\" />;\n      case 'rejected':\n        return <AlertCircle className=\"w-4 h-4 text-red-500\" />;\n      default:\n        return <Clock className=\"w-4 h-4 text-gray-500\" />;\n    }\n  };\n\n  const getStatusColor = (status?: string) => {\n    switch (status) {\n      case 'pending':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'reviewed':\n        return 'bg-blue-100 text-blue-800';\n      case 'shortlisted':\n        return 'bg-green-100 text-green-800';\n      case 'rejected':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  // Filter applications based on search and status\n  const filteredApplications = applications.filter(app => {\n    const matchesSearch = \n      app.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      app.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      app.job_title.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesStatus = statusFilter === \"all\" || app.status === statusFilter;\n    return matchesSearch && matchesStatus;\n  });\n\n  const exportCSV = () => {\n    if (filteredApplications.length === 0) return;\n\n    const csvRows: string[] = [];\n    // Headers\n    csvRows.push([\n      \"ID\",\n      \"Job Title\",\n      \"Name\",\n      \"Email\",\n      \"Phone\",\n      \"Cover Letter\",\n      \"CV URL\",\n      \"Submitted At\",\n      \"Status\",\n      \"Experience (Years)\",\n      \"Desired Salary\",\n      \"Availability\",\n      \"LinkedIn URL\",\n      \"Portfolio URL\"\n    ].join(\",\"));\n\n    // Data rows\n    filteredApplications.forEach(app => {\n      csvRows.push([\n        app.id,\n        app.job_title,\n        app.name,\n        app.email,\n        app.phone || \"\",\n        app.cover_letter ? `\"${app.cover_letter.replace(/\"/g, '\"\"')}\"` : \"\",\n        app.cv_url ? getCVLink(app.cv_url) : \"\",\n        new Date(app.submitted_at).toISOString(),\n        app.status,\n        app.experience_years || 0,\n        app.desired_salary || \"\",\n        app.availability || \"\",\n        app.linkedin_url || \"\",\n        app.portfolio_url || \"\"\n      ].join(\",\"));\n    });\n\n    const blob = new Blob([csvRows.join(\"\\n\")], { type: \"text/csv;charset=utf-8;\" });\n    const url = URL.createObjectURL(blob);\n\n    const a = document.createElement(\"a\");\n    a.setAttribute(\"href\", url);\n    a.setAttribute(\"download\", \"job_applications.csv\");\n    a.style.visibility = \"hidden\";\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n  };\n\n  if (!isClient) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading applications...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-4\">\n      {/* Header */}\n      <AnimatedSection animation=\"fade-down\" delay={100} duration={600}>\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Job Applications</h1>\n          <p className=\"text-gray-600\">Manage and review job applications from candidates</p>\n        </div>\n      </AnimatedSection>\n\n      {/* Filters, Search, and Export */}\n      <AnimatedSection animation=\"fade-up\" delay={200} duration={600}>\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8\">\n          {/* Export button top right */}\n          <div className=\"flex justify-end mb-4\">\n            <button\n              onClick={exportCSV}\n              className=\"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors\"\n              disabled={filteredApplications.length === 0}\n            >\n              <Download className=\"w-5 h-5\" />\n              Export CSV\n            </button>\n          </div>\n          <div className=\"flex flex-col md:flex-row gap-4\">\n            {/* Search */}\n            <div className=\"flex-1\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                <input\n                  type=\"text\" \n                  placeholder=\"Search by name, email, or job title...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent appearance-none text-base text-gray-900 font-semibold bg-white\"\n                />\n              </div>\n            </div>\n\n            {/* Status Filter */}\n            <div className=\"md:w-48\">\n              <div className=\"relative\">\n                <Filter className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 \" />\n                <select\n                  value={statusFilter}\n                  onChange={(e) => setStatusFilter(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent appearance-none text-base text-gray-600 font-semibold bg-white\"\n                >\n                  <option value=\"all\">All Status</option>\n                  <option value=\"pending\">Pending</option>\n                  <option value=\"reviewed\">Reviewed</option>\n                  <option value=\"shortlisted\">Shortlisted</option>\n                  <option value=\"rejected\">Rejected</option>\n                </select>\n              </div>\n            </div>\n          </div>\n\n          {/* Stats */}\n          <div className=\"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4\">\n            {[\n              { label: 'Total', count: applications.length, color: 'text-gray-600' },\n              { label: 'Pending', count: applications.filter(a => a.status === 'pending').length, color: 'text-yellow-600' },\n              { label: 'Reviewed', count: applications.filter(a => a.status === 'reviewed').length, color: 'text-blue-600' },\n              { label: 'Shortlisted', count: applications.filter(a => a.status === 'shortlisted').length, color: 'text-green-600' }\n            ].map((stat, index) => (\n              <div key={index} className=\"text-center\">\n                <div className={`text-2xl font-bold ${stat.color}`}>{stat.count}</div>\n                <div className=\"text-sm text-gray-500\">{stat.label}</div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </AnimatedSection>\n\n      {/* Applications List */}\n      {loading ? (\n        <AnimatedSection animation=\"fade-in\" delay={300} duration={600}>\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center\">\n            <div className=\"w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n            <p className=\"text-gray-500\">Loading applications...</p>\n          </div>\n        </AnimatedSection>\n      ) : filteredApplications.length === 0 ? (\n        <AnimatedSection animation=\"bounce-in\" delay={300} duration={600}>\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center\">\n            <Briefcase className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Applications Found</h3>\n            <p className=\"text-gray-500\">\n              {searchTerm || statusFilter !== \"all\" \n                ? \"No applications match your current filters.\" \n                : \"No job applications have been submitted yet.\"\n              }\n            </p>\n          </div>\n        </AnimatedSection>\n      ) : (\n         <div className=\"grid lg:grid-cols-3 gap-4 mt-6\">\n          {filteredApplications.map((app, index) => (\n            <AnimatedSection \n              key={app.id}\n              animation=\"fade-up\" \n              delay={400 + (index * 100)} \n              duration={600}\n            >\n              <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-all duration-300 relative\">\n                {/* Status Badge - Top Right */}\n                <div className={`absolute top-6 right-6 inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold z-10 ${getStatusColor(app.status)}`}>\n                  {getStatusIcon(app.status)}\n                  <span className=\"ml-1 capitalize\">{app.status || 'pending'}</span>\n                </div>\n                <div className=\"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4\">\n                  {/* Left Side - Main Info */}\n                  <div className=\"flex-1\">\n                    {/* Job Title */}\n                    <h3 className=\"text-xl font-bold text-gray-900 mb-1\">\n                      {app.job_title || \"Untitled Position\"}\n                    </h3>\n                    {/* Candidate Info */}\n                    <div className=\"flex flex-wrap items-center space-x-4 text-sm text-gray-800 mt-6 mb-4\">\n                      <div className=\"flex items-center\">\n                        <User className=\"w-4 h-4 mr-1\" />\n                        <span className=\"font-medium\">{app.name}</span>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <Mail className=\"w-4 h-4 mr-1\" />\n                        <span>{app.email}</span>\n                      </div>\n                      {app.phone && (\n                        <div className=\"flex items-center\">\n                          <Phone className=\"w-4 h-4 mr-1\" />\n                          <span>{app.phone}</span>\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Additional Info */}\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 text-sm text-gray-800\">\n                      {app.experience_years && (\n                        <div className=\"flex items-center\">\n                          <Briefcase className=\"w-4 h-4 mr-2\" />\n                          <span>{app.experience_years} years experience</span>\n                        </div>\n                      )}\n                      {app.desired_salary && (\n                        <div className=\"flex items-center\">\n                          <span className=\"w-4 h-4 mr-2\">ðŸ’°</span>\n                          <span>{app.desired_salary}</span>\n                        </div>\n                      )}\n                      {app.availability && (\n                        <div className=\"flex items-center\">\n                          <Calendar className=\"w-4 h-4 mr-2\" />\n                          <span>{app.availability}</span>\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Cover Letter Preview */}\n                    {app.cover_letter && (\n                      <div className=\"bg-gray-50 rounded-lg p-4 mb-4\">\n                        <h4 className=\"font-semibold text-gray-900 mb-2\">Cover Letter</h4>\n                        <p className=\"text-gray-800 text-sm line-clamp-3\">\n                          {app.cover_letter.length > 200 \n                            ? `${app.cover_letter.substring(0, 200)}...` \n                            : app.cover_letter\n                          }\n                        </p>\n                      </div>\n                    )}\n\n                    {/* Links */}\n                    <div className=\"flex flex-wrap gap-2 mb-4\">\n                      {app.linkedin_url && (\n                        <a\n                          href={app.linkedin_url}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"text-blue-700 hover:text-blue-900 text-sm flex items-center font-medium\"\n                        >\n                          <span className=\"w-4 h-4 mr-1\">ðŸ’¼</span>\n                          LinkedIn\n                        </a>\n                      )}\n                      {app.portfolio_url && (\n                        <a\n                          href={app.portfolio_url}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"text-purple-700 hover:text-purple-900 text-sm flex items-center font-medium\"\n                        >\n                          <span className=\"w-4 h-4 mr-1\">ðŸŽ¨</span>\n                          Portfolio\n                        </a>\n                      )}\n                    </div>\n\n                    <div className=\"flex items-center text-xs text-gray-600\">\n                      <Calendar className=\"w-3 h-3 mr-1\" />\n                      Submitted: {new Date(app.submitted_at).toLocaleDateString()}\n                    </div>\n                  </div>\n\n                  {/* Right Side - Actions */}\n                  <div className=\"flex flex-col space-y-3 lg:w-48\">\n                    {/* CV Download */}\n                    {app.cv_url ? (\n                      <a\n                        href={getCVLink(app.cv_url)}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"flex items-center justify-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\"\n                      >\n                        <FileText className=\"w-4 h-4 mr-2\" />\n                        View CV\n                      </a>\n                    ) : (\n                      <div className=\"flex items-center justify-center px-4 py-2 bg-gray-100 text-gray-500 rounded-lg\">\n                        <AlertCircle className=\"w-4 h-4 mr-2\" />\n                        No CV\n                      </div>\n                    )}\n\n                    {/* Status Actions */}\n                    <div className=\"flex flex-col space-y-2\">\n                      <select\n                        value={app.status || 'pending'}\n                        onChange={(e) => updateApplicationStatus(app.id, e.target.value)}\n                        className=\"px-3 py-2 border border-gray-400 rounded-lg text-sm font-semibold text-gray-900 bg-white focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                      >\n                        <option value=\"pending\" className=\"font-semibold text-yellow-700 bg-yellow-50\">Pending</option>\n                        <option value=\"reviewed\" className=\"font-semibold text-blue-700 bg-blue-50\">Reviewed</option>\n                        <option value=\"shortlisted\" className=\"font-semibold text-green-700 bg-green-50\">Shortlisted</option>\n                        <option value=\"rejected\" className=\"font-semibold text-red-700 bg-red-50\">Rejected</option>\n                      </select>\n\n                      <button\n                        onClick={() => {\n                          setSelectedApplication(app);\n                          setShowDetailModal(true);\n                        }}\n                        className=\"flex items-center justify-center px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm\"\n                      >\n                        <Eye className=\"w-4 h-4 mr-2\" />\n                        Details\n                      </button>\n\n                      <button\n                        onClick={() => deleteApplication(app.id)}\n                        className=\"flex items-center justify-center px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm\"\n                      >\n                        <Trash2 className=\"w-4 h-4 mr-2\" />\n                        Delete\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </AnimatedSection>\n          ))}\n        </div>\n      )}\n\n      {/* Detail Modal */}\n      {showDetailModal && selectedApplication && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h2 className=\"text-2xl font-bold text-gray-900\">Application Details</h2>\n                <button\n                  onClick={() => setShowDetailModal(false)}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  âœ•\n                </button>\n              </div>\n\n              <div className=\"space-y-6\">\n                <div>\n                  <h3 className=\"font-semibold text-lg text-gray-900 mb-2\">{selectedApplication.job_title}</h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700\">Name</label>\n                      <p className=\"text-gray-900 font-medium\">{selectedApplication.name}</p>\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700\">Email</label>\n                      <p className=\"text-gray-900\">{selectedApplication.email}</p>\n                    </div>\n                    {selectedApplication.phone && (\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700\">Phone</label>\n                        <p className=\"text-gray-900\">{selectedApplication.phone}</p>\n                      </div>\n                    )}\n                    {selectedApplication.experience_years && (\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700\">Experience</label>\n                        <p className=\"text-gray-900\">{selectedApplication.experience_years} years</p>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {selectedApplication.cover_letter && (\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Cover Letter</label>\n                    <div className=\"bg-gray-50 rounded-lg p-4\">\n                      <p className=\"text-gray-800 whitespace-pre-wrap\">{selectedApplication.cover_letter}</p>\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"flex justify-end space-x-3\">\n                  <button\n                    onClick={() => setShowDetailModal(false)}\n                    className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n                  >\n                    Close\n                  </button>\n                  {selectedApplication.cv_url && (\n                    <a\n                      href={getCVLink(selectedApplication.cv_url)}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600\"\n                    >\n                      View CV\n                    </a>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default JobApplications;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1326, "column": 0}, "map": {"version":3,"sources":["file:///Users/viengsone/Documents/slkwebsite-next/src/app/admin-dashboard/careers/job-applications/page.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { supabase } from \"@/lib/supabase\";\nimport { FileText, Download, Trash2 } from \"lucide-react\";\nimport toast from \"react-hot-toast\";\nimport { confirmAlert } from \"react-confirm-alert\";\nimport \"react-confirm-alert/src/react-confirm-alert.css\";\nimport JobApplications from \"@/components/admin/JobApplications\"; // <-- Import JobApplications\n\nconst AdminJobApplications = () => {\n  const [jobs, setJobs] = useState<any[]>([]);\n  const [applications, setApplications] = useState<any[]>([]);\n  const [selectedJobIds, setSelectedJobIds] = useState<string[]>([]);\n  const [selectAll, setSelectAll] = useState(false);\n  const [cvLinks, setCvLinks] = useState<{ [key: string]: string }>({});\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const fetchData = async () => {\n    const { data: jobsData } = await supabase\n      .from(\"jobs\")\n      .select(\"*\")\n      .order(\"created_at\", { ascending: false });\n\n    const { data: appsData } = await supabase.from(\"job_applications\").select(\"*\");\n\n    setJobs(jobsData || []);\n    setApplications(appsData || []);\n  };\n\n  const handleCheckboxChange = (jobId: string) => {\n    setSelectedJobIds((prev) =>\n      prev.includes(jobId) ? prev.filter((id) => id !== jobId) : [...prev, jobId]\n    );\n  };\n\n  const handleSelectAll = () => {\n    if (selectAll) {\n      setSelectedJobIds([]);\n    } else {\n      setSelectedJobIds(jobs.map((job) => job.id));\n    }\n    setSelectAll(!selectAll);\n  };\n\n  const exportCSV = () => {\n    let csvRows: string[] = [];\n    csvRows.push(\"Job Title,Department,Location,Applicant Name,Email,Phone,Cover Letter,CV Link\");\n\n    jobs.forEach((job) => {\n      if (!selectedJobIds.includes(job.id)) return;\n\n      const jobApps = applications.filter((app) => app.job_id === job.id);\n      jobApps.forEach((app) => {\n        const row = [\n          `\"${job.title}\"`,\n          `\"${job.department}\"`,\n          `\"${job.location}\"`,\n          `\"${app.name}\"`,\n          `\"${app.email}\"`,\n          `\"${app.phone}\"`,\n          `\"${app.cover_letter?.replace(/\"/g, '\"\"')}\"`,\n          `\"${app.cv_url}\"`,\n        ];\n        csvRows.push(row.join(\",\"));\n      });\n    });\n\n    const csvContent = csvRows.join(\"\\n\");\n    const blob = new Blob([csvContent], { type: \"text/csv;charset=utf-8;\" });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.href = url;\n    link.setAttribute(\"download\", \"selected_job_applications.csv\");\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const handleDelete = (applicationId: string) => {\n    confirmAlert({\n      title: \"Confirm Delete\",\n      message: \"Are you sure you want to delete this application?\",\n      buttons: [\n        {\n          label: \"Yes, Delete\",\n          onClick: async () => {\n            const { error } = await supabase\n              .from(\"job_applications\")\n              .delete()\n              .eq(\"id\", applicationId);\n\n            if (error) {\n              toast.error(\"Failed to delete application.\");\n            } else {\n              toast.success(\"Application deleted.\");\n              setApplications((prev) => prev.filter((app) => app.id !== applicationId));\n            }\n          },\n        },\n        {\n          label: \"Cancel\",\n          onClick: () => {},\n        },\n      ],\n    });\n  };\n\n  const updateApplicationStatus = async (applicationId: string, newStatus: string) => {\n    if (!applicationId || !newStatus) {\n      console.error(\"Missing applicationId or newStatus\", { applicationId, newStatus });\n      return;\n    }\n    const { error, data, status, statusText } = await supabase\n      .from(\"job_applications\")\n      .update({ status: newStatus })\n      .eq(\"id\", applicationId)\n      .select();\n\n    if (error || !data || data.length === 0) {\n      console.error(\"Error updating status:\", error, { applicationId, newStatus, status, statusText, data });\n      toast.error(\"Failed to update status. Please check if the application exists and the status column is correct.\");\n    } else {\n      toast.success(\"Status updated!\");\n      // Optionally update local state here\n    }\n  };\n\n  const getCVLink = async (cvPath: string, appId: string) => {\n    if (!cvPath) return \"#\";\n    // Only generate if not already in state\n    if (cvLinks[appId]) return cvLinks[appId];\n    const { data, error } = await supabase.storage\n      .from(\"cv-applications\")\n      .createSignedUrl(cvPath, 60); // 60 seconds\n    if (error) {\n      console.error(error);\n      return \"#\";\n    }\n    setCvLinks((prev) => ({ ...prev, [appId]: data.signedUrl }));\n    return data.signedUrl;\n  };\n\n  return (\n    <div className=\"p-4\">\n      {/* Render JobApplications at the beginning */}\n      <JobApplications />\n\n      <div className=\"flex justify-between items-center mb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-700\">Job Applications by Posting</h2>\n        <button\n          onClick={exportCSV}\n          className=\"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-90\"\n          disabled={selectedJobIds.length === 0}\n        >\n          <Download className=\"w-4 h-4 text-white\" />\n          Export Selected\n        </button>\n      </div>\n\n      <div className=\"mb-4\">\n        <label className=\"inline-flex items-center gap-2 text-sm font-medium text-gray-700\">\n          <input\n            type=\"checkbox\"\n            checked={selectAll}\n            onChange={handleSelectAll}\n            className=\"accent-blue-600\"\n          />\n          Select All\n        </label>\n      </div>\n\n      {jobs.map((job) => {\n        const isChecked = selectedJobIds.includes(job.id);\n        return (\n          <div key={job.id} className=\"mb-8 p-4 border rounded bg-gray-50 shadow\">\n            <div className=\"flex justify-between items-start mb-2\">\n              <div>\n                <h3 className=\"text-xl font-semibold text-blue-700\">{job.title}</h3>\n                <p className=\"text-sm text-gray-500\">\n                  {job.department} | {job.location} | {job.application_start} - {job.application_end}\n                </p>\n              </div>\n              <input\n                type=\"checkbox\"\n                checked={isChecked}\n                onChange={() => handleCheckboxChange(job.id)}\n                className=\"accent-blue-600 mt-1\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {applications.filter((app) => app.job_id === job.id).length > 0 ? (\n                applications\n                  .filter((app) => app.job_id === job.id)\n                  .map((app) => (\n                    <div key={app.id} className=\"p-3 bg-white border rounded relative\">\n                      <p className=\"font-medium text-gray-700\">\n                        {app.name} ({app.email})\n                      </p>\n                      <p className=\"text-sm text-gray-600\">ðŸ“ž {app.phone}</p>\n                      <p className=\"text-sm italic mt-1 text-gray-700\">\"{app.cover_letter}\"</p>\n                      {app.cv_url ? (\n                        <a\n                          href={app.cv_url}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"text-blue-500 hover:underline inline-flex items-center gap-1 mt-1\"\n                        >\n                          <FileText className=\"w-4 h-4\" /> View CV\n                        </a>\n                      ) : (\n                        <span className=\"text-sm text-red-500\">No CV uploaded</span>\n                      )}\n\n                      <button\n                        onClick={() => handleDelete(app.id)}\n                        className=\"absolute top-2 right-2 text-red-500 hover:text-red-700\"\n                        title=\"Delete Application\"\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </button>\n                    </div>\n                  ))\n              ) : (\n                <p className=\"text-sm text-gray-400 col-span-full\">No applications for this job.</p>\n              )}\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default AdminJobApplications;\n"],"names":[],"mappings":"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","debugId":null}}]
}